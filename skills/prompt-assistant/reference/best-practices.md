# 提示词最佳实践 (Best Practices)

编写高效提示词的核心原则和实用技巧。

## 黄金法则

### 1️⃣ 清晰优于聪明 (Clarity Over Cleverness)

✅ **好**: "提取发票的供应商名称、日期和总金额，返回为JSON"

❌ **差**: "在这个文档中找到我需要的"

🎯 **为什么**: AI更容易理解具体、直接的指令

---

### 2️⃣ 具体优于通用 (Specific Over Generic)

✅ **好**: "为初级Python开发者写一个500字的解释，不包含代码"

❌ **差**: "解释Python列表"

🎯 **为什么**: 具体的约束可以确保输出符合您的需要

---

### 3️⃣ 显示优于告诉 (Show, Don't Tell)

✅ **好**: 包含一个格式化的示例，展示您期望的确切输出

❌ **差**: "使用一个好的格式"

🎯 **为什么**: 示例消除了歧义，比描述更强大

---

### 4️⃣ 约束优于希望 (Constraints Over Hope)

✅ **好**: "给我3-5个要点，每个不超过50字"

❌ **差**: "给我要点，但不要太多"

🎯 **为什么**: 明确的约束防止了过长或过短的输出

---

## 提示词结构最佳实践

### 标准结构 (Standard Structure)

在最有效的情况下，应该按以下顺序组织：

```markdown
1. 角色/背景 [可选但推荐]
2. 任务/目标 [必需]
3. 背景/上下文 [如适用]
4. 输入格式 [如果有输入]
5. 输出格式 [必需]
6. 约束和规则 [重要]
7. 示例 [推荐]
```

### 完整示例

```
你是一个具有20年SQL经验的数据库专家。

你的任务是审查提供的SQL查询并识别性能问题。

背景: 我正在优化一个处理100万条记录的表格。

输入: SQL查询代码块

输出格式:
- 识别的问题(如果没有，说"没有发现主要问题")
- 每个问题的严重程度(高/中/低)
- 改进建议
- 改进后的查询(如果适用)

约束:
- 仅针对真正影响性能的问题
- 忽略风格问题
- 假设数据库已创建适当的索引

示例:
[有问题的查询] → [识别的问题] → [改进的查询]
```

---

## 关键组件的最佳实践

### A. 角色定义

✅ **做**: 明确定义身份和背景
```
你是一个精通UX设计的产品策略师，在电子商务公司有12年的工作经验。
```

❌ **不要**: 模糊或夸大的身份
```
你是世界上最好的设计师
```

### B. 目标陈述

✅ **做**: 清晰、具体、可衡量
```
根据用户反馈分析特性优先级，确定哪个特性将有最大的用户满意度影响。
```

❌ **不要**: 模糊或抽象的目标
```
帮我优化一些东西
```

### C. 输入规范

✅ **做**: 明确定义输入格式
```
输入将是CSV格式，包含列: user_id, feature_name, feedback_score(1-5), date
```

❌ **不要**: 假设输入格式
```
你会得到反馈
```

### D. 输出格式

✅ **做**: 提供精确的格式或模板
```
以JSON格式返回，结构如下:
{
  "feature": "string",
  "priority_score": 1-10,
  "reasoning": "string",
  "recommended_action": "string"
}
```

❌ **不要**: 让输出格式模糊
```
告诉我该怎么做
```

### E. 约束和规则

✅ **做**: 明确列出规则
```
规则:
- 仅考虑评分>=4的评论
- 忽略可行性问题，仅关注用户价值
- 不包括新产品特性讨论
```

❌ **不要**: 留下隐含假设
```
使用常识
```

### F. 示例

✅ **做**: 包括真实、代表性的示例
```
输入示例:
user_123,dark-mode,5,2024-01-15
user_456,mobile-app,4,2024-01-16

输出示例:
{
  "feature": "dark-mode",
  "priority_score": 9,
  "reasoning": "高分数和高频率提及"
}
```

❌ **不要**: 模糊或不完整的示例
```
给我一个例子
```

---

## 提高质量的技巧

### 1. 使用"对立面"模式

**效果**: 解释什么不做与什么做一样有帮助

```markdown
✅ 做:
- 包含用户定量反馈
- 提到具体特性
- 解释为什么

❌ 不做:
- 猜测没有数据支持
- 提及竞争对手功能
- 基于一个用户的反馈
```

### 2. 使用"备选方案"指导

**效果**: 显示多个选项，让AI更好地理解范围

```markdown
您可能需要:

选项A: 详细的分析报告(5-10页)
选项B: 执行摘要(1页)
选项C: 演讲讲稿(3分钟)

[基于我需要...我想要选项__]
```

### 3. 解释原因

**效果**: 当AI理解为什么，它可以更好地适应

```markdown
❌ "不要使用行业术语"
✅ "避免行业术语，因为受众是初级开发者"
```

### 4. 包含失败情况处理

**效果**: 防止AI猜测或编造

```markdown
如果数据不完整:
- 报告"数据不足以得出结论"而不是猜测
- 列出缺失的信息

如果有冲突的结果:
- 解释哪些方法更可靠
- 优先级争议的规则
```

### 5. 包含验证标准

**效果**: 帮助AI和用户检查输出质量

```markdown
输出应该:
✅ 可追溯到源数据
✅ 包括置信度评估
✅ 解释任何假设
✅ 提出后续步骤
```

---

## 常见陷阱和如何避免

| 陷阱 | 症状 | 解决方案 |
|-----|-----|--------|
| **目标不清** | AI问很多澄清问题 | 重新审视你的目标陈述 |
| **示例缺失** | 输出格式错误 | 添加真实、具体的示例 |
| **约束混淆** | 输出包含不需要的内容 | 添加明确的"不做"列表 |
| **过长提示词** | AI关注错误的部分 | 删除不必要的信息 |
| **术语不清** | AI误解你的意思 | 定义所有不常见的术语 |
| **背景缺失** | 输出不适当 | 解释为什么你需要这个 |

---

## 针对特定使用场景的最佳实践

### 数据提取/解析

✅ 为每个字段提供示例
✅ 明确定义缺失值的处理方式
✅ 指定输出格式(JSON/CSV/XML)
✅ 包括边界情况示例

❌ 不要假设AI知道什么字段重要
❌ 不要让格式模糊

### 内容生成

✅ 定义目标受众
✅ 指定长度和结构
✅ 包含风格示例
✅ 列出禁忌主题

❌ 不要只是要求"好内容"
❌ 不要忘记目标受众

### 代码生成

✅ 指定语言和版本
✅ 列出库和框架
✅ 包括错误处理需求
✅ 提供用法示例

❌ 不要假设AI知道你的技术栈
❌ 不要跳过错误处理指导

### 分析和见解

✅ 定义"见解"的含义
✅ 指定证据级别
✅ 包括成功标准
✅ 明确约束假设

❌ 不要要求"深见解"而不解释这意味着什么
❌ 不要忘记限制

---

## 测试和迭代

### A/B测试提示词

**方法**:
1. 版本A: 你的原始提示词
2. 版本B: 优化版本(添加示例或更清晰)
3. 使用相同输入测试两个版本3-5次
4. 比较一致性和质量

**测量**:
- 一致性: 输出的相似百分比
- 质量: 满足标准的程度
- 效率: 所需迭代次数

### 签名问题

如果您注意到模式...| 可能的修复 |
|---|---|
| 经常忽略特定要求 | 在提示词中更突出地强调它 |
| 格式不一致 | 添加更精确的格式示例 |
| 添加不需要的内容 | 添加更明确的"不做"列表 |
| 输出过长/过短 | 添加具体的长度约束 |
| 误解意思 | 改进定义或添加背景 |

---

## 提示词优化检查清单

在完成提示词之前，检查:

**内容**:
- [ ] 目标在第一句清晰陈述
- [ ] 受众明确定义
- [ ] 有2-3个具体示例
- [ ] 约束明确列出
- [ ] 输出格式精确指定

**清晰**:
- [ ] 使用主动语态
- [ ] 句子简短(平均<20字)
- [ ] 专业术语已定义
- [ ] 没有模糊语言("某种","差不多")

**完整性**:
- [ ] 输入格式已定义
- [ ] 输出格式已定义
- [ ] 有成功标准
- [ ] 错误情况已处理

**长度**:
- [ ] 没有冗余措辞
- [ ] 没有包含不需要的背景
- [ ] 长度与复杂性成正比
- [ ] 每部分都有目的

**可测试**:
- [ ] 可以用确切示例测试
- [ ] 成功/失败很清楚
- [ ] 输出可以验证
- [ ] 可以衡量一致性

---

## 资源

### 提示词工程框架

**制作有效提示词的方法**:
1. 开始使用清晰的目标
2. 添加背景和上下文
3. 指定输出格式
4. 列出约束和规则
5. 包括示例
6. 测试和迭代

### 常用短语

- **而不是**: 而不是..., 优先级是...
- **例如**: 例如, 对于实例
- **约束**: 仅当, 只有, 直到, 避免, 不包括
- **验证**: 确保, 检查, 验证, 确认
- **结构**: 按...组织, 分成..., 排列...

---

## 扩展阅读和资源

- OpenAI提示词最佳实践: [docs.openai.com](https://docs.openai.com)
- 高质量提示词的研究
- 提示词工程学术论文

